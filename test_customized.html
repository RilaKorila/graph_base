<html>
  <head>
    <meta charset="utf-8" />

    <script src="lib/bindings/utils.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css"
      integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js"
      integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <center>
      <h1></h1>
    </center>

    <!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
      crossorigin="anonymous"
    ></script>

    <center>
      <h1></h1>
    </center>
    <style type="text/css">
      #mynetwork {
        width: 900px;
        height: 900px;
        background-color: #ffffff;
        border: 1px solid lightgray;
        position: relative;
        float: left;
      }
    </style>
    <link rel="stylesheet" href="./original.css" />
  </head>

  <body>
    <div class="card" style="width: 100%">
      <div id="mynetwork" class="card-body"></div>
      <div id="mynetwok_panel">
        <fieldset>
          <legend>Path:</legend>

          <div>
            <input type="checkbox" id="path0" name="path0" checked />
            <label for="path0">path0</label>
          </div>

          <div>
            <input type="checkbox" id="path1" name="path1" />
            <label for="path1">path1</label>
          </div>

          <div>
            <input type="checkbox" id="path2" name="path2" />
            <label for="path2">path2</label>
          </div>

          <div>
            <input type="checkbox" id="path3" name="path3" />
            <label for="path3">path3</label>
          </div>
          <div>
            <input type="checkbox" id="path4" name="path4" />
            <label for="path4">path4</label>
          </div>
        </fieldset>
        <input type="button" name="show_path" id="show_path" value="Show" />
      </div>
    </div>

    <script type="text/javascript">
      // initialize global variables.
      var edges;
      var nodes;
      var allNodes;
      var allEdges;
      var nodeColors;
      var originalNodes;
      var network;
      var container;
      var options, data;
      var filter = {
        item: "",
        property: "",
        value: [],
      };

      // This method is responsible for drawing the graph, returns the drawn network
      function drawGraph() {
        var container = document.getElementById("mynetwork");

        // parsing and collecting nodes and edges from the python
        nodes = new vis.DataSet([
          {
            borderWidth: 0,
            group: 0,
            id: 11,
            label: "11",
            physics: false,
            shape: "dot",
            size: 3,
            x: 329.0943073464692,
            y: 201.09562092634533,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 8,
            label: "8",
            physics: false,
            shape: "dot",
            size: 3,
            x: 154.37047985323886,
            y: 358.4176618364482,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 14,
            label: "14",
            physics: false,
            shape: "dot",
            size: 3,
            x: 532.7090915285202,
            y: 318.65267138484,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 1,
            label: "1",
            physics: false,
            shape: "dot",
            size: 3,
            x: 532.7090915285202,
            y: 481.34732861516,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 6,
            label: "6",
            physics: false,
            shape: "dot",
            size: 3,
            x: 188.19660112501055,
            y: 517.5570504584946,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 3,
            label: "3",
            physics: false,
            shape: "dot",
            size: 3,
            x: 411.8033988749895,
            y: 590.2113032590307,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 0,
            label: "0",
            physics: false,
            shape: "dot",
            size: 3,
            x: 550.0,
            y: 400.0,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 7,
            label: "7",
            physics: false,
            shape: "dot",
            size: 3,
            x: 154.37047985323886,
            y: 441.58233816355187,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 9,
            label: "9",
            physics: false,
            shape: "dot",
            size: 3,
            x: 188.19660112501052,
            y: 282.4429495415054,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 13,
            label: "13",
            physics: false,
            shape: "dot",
            size: 3,
            x: 483.8261212717717,
            y: 251.3710349045212,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 4,
            label: "4",
            physics: false,
            shape: "dot",
            size: 3,
            x: 329.09430734646935,
            y: 598.9043790736547,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 5,
            label: "5",
            physics: false,
            shape: "dot",
            size: 3,
            x: 250.00000000000006,
            y: 573.2050807568878,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 12,
            label: "12",
            physics: false,
            shape: "dot",
            size: 3,
            x: 411.80339887498945,
            y: 209.78869674096927,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 10,
            label: "10",
            physics: false,
            shape: "dot",
            size: 3,
            x: 249.99999999999991,
            y: 226.79491924311233,
          },
          {
            borderWidth: 0,
            group: 0,
            id: 2,
            label: "2",
            physics: false,
            shape: "dot",
            size: 3,
            x: 483.8261212717717,
            y: 548.6289650954789,
          },
        ]);
        edges = new vis.DataSet([
          { arrows: "to", from: 11, to: 8, width: 0.2 },
          { arrows: "to", from: 7, to: 9, width: 0.2 },
          { arrows: "to", from: 7, to: 3, width: 0.2 },
          { arrows: "to", from: 1, to: 3, width: 0.2 },
          { arrows: "to", from: 9, to: 12, width: 0.2 },
          { arrows: "to", from: 3, to: 12, width: 0.2 },
          { arrows: "to", from: 12, to: 1, width: 0.2 },
          { arrows: "to", from: 1, to: 7, width: 0.2 },
          { arrows: "to", from: 12, to: 8, width: 0.2 },
          { arrows: "to", from: 10, to: 5, width: 0.2 },
          { arrows: "to", from: 6, to: 11, width: 0.2 },
          { arrows: "to", from: 8, to: 11, width: 0.2 },
          { arrows: "to", from: 14, to: 7, width: 0.2 },
          { arrows: "to", from: 11, to: 13, width: 0.2 },
          { arrows: "to", from: 3, to: 10, width: 0.2 },
          { arrows: "to", from: 5, to: 6, width: 0.2 },
          { arrows: "to", from: 2, to: 14, width: 0.2 },
        ]);

        nodeColors = {};
        allNodes = nodes.get({ returnType: "Object" });
        for (nodeId in allNodes) {
          nodeColors[nodeId] = allNodes[nodeId].color;
        }
        allEdges = edges.get({ returnType: "Object" });

        console.log(nodes.get());

        path1 = new Set([3, 10, 5, 6]); // setはO(1)
        filteredNodes = nodes.get().filter((node) => path1.has(node.id));

        new_nodes = new vis.DataSet(filteredNodes);

        console.log(new_nodes);

        // adding nodes and edges to the graph
        data = { nodes: new_nodes, edges: edges };

        var options = {
          configure: {
            enabled: false,
          },
          edges: {
            color: {
              inherit: true,
            },
            smooth: {
              enabled: true,
              type: "dynamic",
            },
          },
          interaction: {
            dragNodes: true,
            hideEdgesOnDrag: false,
            hideNodesOnDrag: false,
          },
          physics: {
            enabled: true,
            stabilization: {
              enabled: true,
              fit: true,
              iterations: 1000,
              onlyDynamicEdges: false,
              updateInterval: 50,
            },
          },
        };

        network = new vis.Network(container, data, options);

        return network;
      }
      drawGraph();
    </script>
  </body>
</html>
